<!doctype html><html lang=en><head><title>Setup Desktop Environment on a Remote Server ¬∑ sytranvn.dev</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Sy Tran"><meta name=description content="
Most of the time when we work on a remote server, we only use ssh to get
access to the command line interface of remote host. And from there, we execute
commands to various tasks.
However, this remote server won&rsquo;t be accessible to non-technical person like
us. What if we want to share some resources on this server to someone else on
team that doesn&rsquo;t know much about command line? I believe the best solution is
to find a better team member üòâ"><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Setup Desktop Environment on a Remote Server"><meta name=twitter:description content="Most of the time when we work on a remote server, we only use ssh to get access to the command line interface of remote host. And from there, we execute commands to various tasks.
However, this remote server won‚Äôt be accessible to non-technical person like us. What if we want to share some resources on this server to someone else on team that doesn‚Äôt know much about command line? I believe the best solution is to find a better team member üòâ"><meta property="og:url" content="https://sytranvn.dev/posts/setup-desktop-environment-on-a-remote-server/"><meta property="og:site_name" content="sytranvn.dev"><meta property="og:title" content="Setup Desktop Environment on a Remote Server"><meta property="og:description" content="Most of the time when we work on a remote server, we only use ssh to get access to the command line interface of remote host. And from there, we execute commands to various tasks.
However, this remote server won‚Äôt be accessible to non-technical person like us. What if we want to share some resources on this server to someone else on team that doesn‚Äôt know much about command line? I believe the best solution is to find a better team member üòâ"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-07-13T15:49:47+07:00"><meta property="article:modified_time" content="2024-07-13T15:49:47+07:00"><link rel=canonical href=https://sytranvn.dev/posts/setup-desktop-environment-on-a-remote-server/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.4b392a85107b91dbdabc528edf014a6ab1a30cd44cafcd5325c8efe796794fca.css integrity="sha256-SzkqhRB7kdvavFKO3wFKarGjDNRMr81TJcjv55Z5T8o=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/custom.min.36eb58d02db7d3831e8ec30480fa209ae93627f039c1c577e7fdeece45784a20.css integrity="sha256-NutY0C2304MejsMEgPogmuk2J/A5wcV35/3uzkV4SiA=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://sytranvn.dev/>sytranvn.dev
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/now/>Now</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/projects/>Projects</a></li><li class=navigation-item><a class=navigation-link href=/i-heart-oss/>I ‚ù§Ô∏è OSS</a></li><li class=navigation-item><a class=navigation-link href=/accomplishments/>Accomplishments</a></li><li class=navigation-item><a class=navigation-link href=/resume.pdf>Resume</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class=navigation-item><a href=/vi/>üáªüá≥</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://sytranvn.dev/posts/setup-desktop-environment-on-a-remote-server/>Setup Desktop Environment on a Remote Server</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2024-07-13T15:49:47+07:00>July 13, 2024
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
3-minute read</span></div></div><script id=diffblog-plugin-script async src=https://diff.blog/static/js/diffblog_plugin_v1.js></script><script>document.getElementById("diffblog-plugin-script").addEventListener("load",function(){DiffBlog("4at5qx7n0j5yhd86rqu6gyotkgn4o17hu8wn6xis54lwd692ez")})</script></header><div class=post-content><p><img src=/posts/setup-desktop-environment-on-a-remote-server/remote-cloud.png alt="server desktop"></p><p>Most of the time when we work on a remote server, we only use <code>ssh</code> to get
access to the command line interface of remote host. And from there, we execute
commands to various tasks.<br>However, this remote server won&rsquo;t be accessible to non-technical person like
us. What if we want to share some resources on this server to someone else on
team that doesn&rsquo;t know much about command line? I believe the best solution is
to find a better team member üòâ</p><p>Actually not every developer can code in <code>vim</code>. So having a way for her to
access server safely in some situation is great. Then fire her ü§°</p><p>I&rsquo;m just joking. This is only for my curiosity and whoever feel like me. We do
what we can do. Doesn&rsquo;t matter if it is useful to someone else or not. As long
as we have some fun and understand CS a little bit more.</p><p>First of all, we need to setup a remote server. You can spin up a remote VM on
the cloud or just a local virtual machine. We know they are just a few hops
different. Let&rsquo;s pick a Debian 12 image on Google cloud this time but any
Linux distro can work, just use the corresponding package manager.</p><p>Firstly, we need to set up a <code>vnc</code> server. One of the most common one is <code>tigervnc</code>.
As default Debian server image does not come with desktop environments. We
install <code>xterm</code> to test xwindow server. Once the connection is set, we can
do the same with an actual desktop environment.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>sudo apt update
</span></span><span class=line><span class=cl>sudo apt install -y tigervnc-standalone-server xterm
</span></span></code></pre></div><p>Now let&rsquo;s start the <code>vncserver</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>vncserver -xstartup /usr/bin/xterm
</span></span><span class=line><span class=cl>New Xtigervnc server <span class=s1>&#39;instance-20240713-063129.us-central1-c.c.sytrancsvn.internal:1 (sytrancsvn)&#39;</span> on port <span class=m>5901</span> <span class=k>for</span> display :1.
</span></span><span class=line><span class=cl>Use xtigervncviewer -SecurityTypes VncAuth -passwd /tmp/tigervnc.4qRcHH/passwd :1 to connect to the VNC server.
</span></span></code></pre></div><p>You will be prompted for password, the client will use that password to connect
to <code>vncserver</code>. The display can be <code>:2 , :3</code> or any number, just make sure you
use the correct display <code>vncserver</code> using.</p><p>Open a new terminal on you local machine, and copy the command to connect to
the VNC server. But remove the <code>-passwd</code> option. The file only exists on remote
server, not on our local. And add <code>-via user@address</code> option.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>sytrancsvn@local:~$ sudo apt install tigervnc-viewer
</span></span><span class=line><span class=cl>sytrancsvn@local:~$ xtigervncviewer -SecurityTypes VncAuth :1 -via sytrancsvn@34.68.50.106
</span></span></code></pre></div><p>Input the password and you should see the <code>xterm</code> interface. Do note that the
connection is not secured, password and all data are transmitted as plain data.
To securely connect to remote server, we need to setup an SSH tunnel and
transmit data over it.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ssh -L 5901:127.0.0.1:5901 -C -N -l  sytrancsvn 34.68.50.106
</span></span></code></pre></div><p>And then use a remote viewer client such as Tiger VNC Viewer to connect with localhost address.</p><p><img src=/posts/setup-desktop-environment-on-a-remote-server/connect-local.png alt=connect-local></p><p>Now our connection is secured.</p><p><img src=/posts/setup-desktop-environment-on-a-remote-server/xterm.png alt=xterm></p><p>If other remote viewer program already exists on you machine such as Remote Viewer or Remmina, you can use that application
instead.</p><p>Now we have set up our secure connection. Let&rsquo;s stop the <code>xterm</code> session and set up
our real desktop environment.
On our remote server. Check if <code>xterm</code> is still running and kill it.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>vncserver -list
</span></span><span class=line><span class=cl>vncserver -kill :&lt;display&gt;
</span></span></code></pre></div><p>Now we install gnome desktop environment.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>sudo apt install -y gnome-session dbus-x11
</span></span></code></pre></div><p>We start <code>vncserver</code> again but this time with <code>gnome-session</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>vncserver -xstartup gnome-session
</span></span></code></pre></div><p>And then connect with the client.</p><p><img src=/posts/setup-desktop-environment-on-a-remote-server/we-in.png alt=we-in></p><p>While working with desktop environment, you might want to adjust display quality
to improve speed. Changing display resolution also help.</p><p>After done working with the session, don&rsquo;t forget to kill it and close SSH
tunnel to save server resources.</p></div><footer></footer></article></section></div><footer class=footer><section class=container>¬©
2021 -
2025
Sy Tran
¬∑
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>