<!doctype html><html lang=en><head><title>The Way I Math With Hugo ¬∑ sytranvn.dev
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Sy Tran"><meta name=description content="Recently I have joined a course to relearn some linear algebra. What I didn't have any intuition during college. I want to do exercises and also add them to my site for content üòÑ"><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="The Way I Math With Hugo"><meta name=twitter:description content="Recently I have joined a course to relearn some linear algebra. What I didn't have any intuition during college. I want to do exercises and also add them to my site for content üòÑ"><meta property="og:url" content="https://sytranvn.dev/posts/the-way-i-math-with-hugo/"><meta property="og:site_name" content="sytranvn.dev"><meta property="og:title" content="The Way I Math With Hugo"><meta property="og:description" content="Recently I have joined a course to relearn some linear algebra. What I didn't have any intuition during college. I want to do exercises and also add them to my site for content üòÑ"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-08-19T12:49:01+07:00"><meta property="article:modified_time" content="2023-08-19T12:49:01+07:00"><link rel=canonical href=https://sytranvn.dev/posts/the-way-i-math-with-hugo/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.7763f8bc6341ecf82378e867c285e1549abb063a899be313ccd25dbfcd24fa7d.css integrity="sha256-d2P4vGNB7PgjeOhnwoXhVJq7BjqJm+MTzNJdv80k+n0=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/custom.min.7da8f1b61155c97f9c07c5bf6ade17bc1cf5979e242f2c17cd4e301cf4ab5138.css integrity="sha256-fajxthFVyX+cB8W/at4XvBz1l54kLywXzU4wHPSrUTg=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://sytranvn.dev/>sytranvn.dev
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/now/>Now</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/projects/>Projects</a></li><li class=navigation-item><a class=navigation-link href=/i-heart-oss/>I ‚ù§Ô∏è OSS</a></li><li class=navigation-item><a class=navigation-link href=/accomplishments/>Accomplishments</a></li><li class=navigation-item><a class=navigation-link href=/resume.pdf>Resume</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class=navigation-item><a href=/vi/>üáªüá≥</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://sytranvn.dev/posts/the-way-i-math-with-hugo/>The Way I Math With Hugo</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2023-08-19T12:49:01+07:00>August 19, 2023
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
3-minute read</span></div></div><script id=diffblog-plugin-script async src=https://diff.blog/static/js/diffblog_plugin_v1.js></script><script>document.getElementById("diffblog-plugin-script").addEventListener("load",function(){DiffBlog("4at5qx7n0j5yhd86rqu6gyotkgn4o17hu8wn6xis54lwd692ez")})</script></header><div class=post-content>Recently I have joined a course to relearn some linear algebra. What I didn't have any intuition during college. I want to do exercises and also add them to my site for content üòÑ<p>Recently I have joined a course to relearn some linear algebra. What I didn&rsquo;t have any intuition during college.
I want to do exercises and also add them to this site for content üòÑ
I am using hugo-coder theme and it comes with katex support. When never I need to write some math, I just need to
enable <code>math</code> front matter in that post.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>+++
</span></span><span class=line><span class=cl>math = true
</span></span><span class=line><span class=cl>+++
</span></span></code></pre></div><p>Hugo will include katex <code>script</code> tag to the page so any texts between <code>$ ... $</code> or paragraphs inside <code>$$ ... $$</code> will be parsed and
rerendered by Katex.
Sounds simple right? But it ain&rsquo;t that easy.<br>All Katex functions begin with a <code>\</code> for example <code>\frac{1}{2}</code> for $\frac{1}{2}$, <code>\\</code> for line break. But because I was writing
posts in markdown files, <code>\\</code> is converted to <code>\</code> when displayed on page.
For example this is valid katex code, but is not rendered correctly.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-md data-lang=md><span class=line><span class=cl>$$
</span></span><span class=line><span class=cl>\text{hello} \\
</span></span><span class=line><span class=cl>\text{this should be on new line}
</span></span><span class=line><span class=cl>$$
</span></span></code></pre></div><p>Because when hugo build markdown file to html, it becomes</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>$$
</span></span><span class=line><span class=cl>\text{hello} \
</span></span><span class=line><span class=cl>\text{this should be on new line}
</span></span><span class=line><span class=cl>$$<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>And after that, katex render the block as
$$
\text{hello} \
\text{this should be on new line}
$$</p><p>So after found out the problem, I had to add <code>\\\</code> to any new line, and I wasn&rsquo;t happy to do so.
An other problem is when editing in markdown, my editor doesn&rsquo;t know the code between <code>$</code> signs need
to be parsed as <code>latex</code> instead of <code>markdown</code>. So I don&rsquo;t have syntax highlighting or autocompletion
features to speed up my typing.
With a programming instinct that scared the whole world, I find a new way to fix them both.
First, I move the code out of markdown files to separate <code>.tex</code> files. And then, include their raw
content back into the main markdown file.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-md data-lang=md><span class=line><span class=cl><span class=c>&lt;!-- mardown file --&gt;</span>
</span></span><span class=line><span class=cl>+++
</span></span><span class=line><span class=cl>math = true
</span></span><span class=line><span class=cl>+++
</span></span><span class=line><span class=cl>I do math for fun
</span></span><span class=line><span class=cl>$$
</span></span><span class=line><span class=cl>{{<span class=p>&lt;</span> <span class=nt>include</span> <span class=err>&#34;</span><span class=na>my-matrix</span><span class=err>.</span><span class=na>tex</span><span class=err>&#34;</span> <span class=p>&gt;</span>}}
</span></span><span class=line><span class=cl>$$
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-tex data-lang=tex><span class=line><span class=cl><span class=c>% my-matrix.tex file
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>\begin</span><span class=nb>{</span>bmatrix<span class=nb>}</span>
</span></span><span class=line><span class=cl>1 <span class=nb>&amp;</span> 0 <span class=nb>&amp;</span> 0 <span class=k>\\</span>
</span></span><span class=line><span class=cl>0 <span class=nb>&amp;</span> 1 <span class=nb>&amp;</span> 1 <span class=k>\\</span>
</span></span><span class=line><span class=cl>0 <span class=nb>&amp;</span> 0 <span class=nb>&amp;</span> 1 <span class=k>\\</span>
</span></span><span class=line><span class=cl><span class=k>\end</span><span class=nb>{</span>bmatrix<span class=nb>}</span>
</span></span></code></pre></div><p>Second, I need to write code for <code>include</code> function to glue all content together. It&rsquo;s a hugo shortcode file at <code>layouts/shortcodes/include.html</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=p>{{</span> <span class=err>$</span><span class=nx>file</span> <span class=o>:=</span> <span class=p>.</span><span class=nx>Get</span> <span class=mi>0</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=p>(</span><span class=nx>printf</span> <span class=s>&#34;%s%s&#34;</span> <span class=p>.</span><span class=nx>Page</span><span class=p>.</span><span class=nx>File</span><span class=p>.</span><span class=nx>Dir</span> <span class=err>$</span><span class=nx>file</span><span class=p>)</span> <span class=p>|</span> <span class=nx>readFile</span> <span class=p>|</span> <span class=nx>replaceRE</span> <span class=s>&#34;^---[\\s\\S]+?---&#34;</span> <span class=s>&#34;&#34;</span> <span class=p>|</span> <span class=nx>safeHTML</span> <span class=p>}}</span>
</span></span></code></pre></div><p>It work flawlessly and I keep doing that up until now. This is result.
$$
\begin{bmatrix}
1 & 0 & 0 \\
0 & 1 & 1 \\
0 & 0 & 1 \\
\end{bmatrix}
$$</p><p>The code of <a href=matrix.tex><code>matrix.tex</code></a> is even available to view or download later üèÖ</p></div><footer></footer></article><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css integrity=sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0 crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js integrity=sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous onload='renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})'></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script></section></div><footer class=footer><section class=container>¬©
2021 -
2025
Sy Tran
¬∑
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>